newgui help [
    guilist [
        if ($isconnected) [
            guilist [
                guione [
                    if ($mutators) [
                        guicenter [guifont "emphasis" [ guitext "Current ^fs^fcmode^fS and ^fs^fymutators^fS:"]]
                    ] [
                        guicenter [guifont "emphasis" [ guitext "Current ^fs^fcmode^fS:"]]
                    ]
                    guilist [
                        guispring
                        looplist i (modetexlist $gamemode $mutators) [
                            guiimage $i [showgui (substr @i 21)] 2
                        ]
                        guispring
                    ]
                    guicenter [ guitext ( concatword  "^fc" (modedesc $gamemode 1 3) ) ]
                    loop i $mutsidxnum [
                        if (& (<< 1 $i) $mutators) [  
                            guicenter [ guitext ( concatword  "^fy" (mutsdesc $gamemode (<< 1 $i) 3) ) ]
                        ]
                    ]
                ]
            ]
            guistrut 0.5
            guibar
            guistrut 0.5
        ]
        guione [
            guilist [
                guifont "emphasis" [
                    guicenter [ guibutton "about" "showgui about" ]
                    guicenter [ guibutton "accounts" "showgui auth" ]
                    guicenter [ guibutton "game modes" "showgui modes" ]
                    guicenter [ guibutton "live support" "showgui support" ]
                    guicenter [ guibutton "mode mutators" "showgui mutators" ]
                    guicenter [ guibutton "parkour" "showgui parkour" ]
                    guicenter [ guibutton "rules" "showgui rules" ]
                    guicenter [ guibutton "scoring" "showgui scoring" ]
                ]
            ]
        ]
    ]
]

newgui about [
    guione [
        guicenter [ guitext "Red Eclipse Engine" ]
        guifont "little" [
            guicenter [ guitext "(C) 2010-2014 Quinton Reeves, Lee Salzman" ]
            guicenter [ guitext "http://www.redeclipse.net/" ]
        ]
        guistrut 1
        guicenter [ guitext "Red Eclipse Data" ]
        guifont "little" [
            guicenter [ guitext "(C) 2010-2014 Red Eclipse Team" ]
            guicenter [ guitext "http://www.redeclipse.net/" ]
        ]
        guistrut 1
        guicenter [ guitext "Based on Cube Engine 2" ]
        guifont "little" [
            guicenter [ guitext "(C) 2001-2014 Wouter van Oortmerssen, Lee Salzman" ]
            guicenter [ guitext "Mike Dysart, Robert Pointon, and Quinton Reeves" ]
            guicenter [ guitext "http://sauerbraten.org/" ]
        ]
    ]
]

newgui modes [
    guiheader "Game Modes"
    guifont "emphasis" [
        guicenter [ guibutton "demo" "showgui demo" ]
        guicenter [ guibutton "editing" "showgui edit" ]
        guicenter [ guibutton "deathmatch" "showgui deathmatch" ]
        guicenter [ guibutton "capture-the-flag" "showgui capture-the-flag" ]
        guicenter [ guibutton "defend-and-control" "showgui defend-and-control" ]
        guicenter [ guibutton "bomber-ball" "showgui bomberball" ]
        guicenter [ guibutton "time-trial" "showgui time-trial" ]
    ]
]

newgui demo [
    guiheader "Demo Mode"
]

newgui edit [
    guiheader "Edit Mode"
]

newgui deathmatch [
    guiheader "Deathmatch Mode"
    guilist [
        guiimage "textures/modes/deathmatch" [] 2
        guistrut 0.5
        guilist [
            guistrut 1
            guicenter [ guitext "Attack enemy players gathering frags, assists, sprees and other bonuses to score points." ]
            guicenter [ guitext "The team or individual with the most points at the end wins!" ]
        ]
    ]
    guitab "tips & strategy"
        guistrut 0.5
        guitext "tip one" point
        guitext "tip two" point
        guitext "tip three" point
    guitab "practice"
]

newgui capture [
    guiheader "Capture-the-Flag Mode"
    guilist [
        guiimage "textures/modes/capture" [] 2
        guistrut 0.5
        guilist [
            guistrut 1
            guicenter [ guitext "Capture the enemy team's flag and return it to your base while defending your own flag from capture." ]
            guicenter [ guitext "Both flags returned to your base scores a point, the team with the most points at the end wins!" ]
        ]
    ]
    guitab "tips & strategy"
        guistrut 0.5
        guitext "tip one" point
        guitext "tip two" point
        guitext "tip three" point
    guitab "mutators"
        guistrut 0.5
        guitext "discuss mode-specific mutator quick" point
        guitext "discuss mode-specific mutator defend" point
        guitext "discuss mode-specific mutator protect" point
    guitab "practice"
]

newgui defend [
    guiheader "Defend-and-Control Mode"
]

newgui bomber [
    guiheader "Bomber-Ball Mode"
]

newgui timetrial [
    guiheader "Time-Trial Mode"
]

newgui support [
    ircgui freenode
] [
    if (= $guipasses 0) [
        ircaddclient freenode irc.freenode.net 6667 (getplayername)
        ircaddchan freenode #redeclipse
    ]
]

newgui mutators [
    guiheader "Mode Mutators"
    guilist [
        guilist [
            guicenter [ guitext "Regular Mutators" ]
            guistrut 0.5
            guifont "emphasis" [
                guicenter [ guibutton "multi" "showgui multi" ]
                guicenter [ guibutton "ffa" "showgui ffa" ]
                guicenter [ guibutton "co-op" "showgui coop" ]
                guicenter [ guibutton "instagib" "showgui instagib" ]
                guicenter [ guibutton "medieval" "showgui medieval" ]
                guicenter [ guibutton "kaboom" "showgui kaboom" ]
                guicenter [ guibutton "duel" "showgui duel" ]
                guicenter [ guibutton "survivor" "showgui survivor" ]
                guicenter [ guibutton "classic" "showgui classic" ]
                guicenter [ guibutton "onslaught" "showgui onslaught" ]
                guicenter [ guibutton "freestyle" "showgui freestyle" ]
                guicenter [ guibutton "vampire" "showgui vampire" ]
                guicenter [ guibutton "resize" "showgui resize" ]
                guicenter [ guibutton "hard" "showgui hard" ]
            ]
        ]
        guistrut 2
        guibar
        guistrut 2
        guilist [
            guicenter [ guitext "Mode-Specific Mutators" ]
            guistrut 0.5
            guifont "emphasis" [
                guicenter [ guibutton "capture-the-flag quick" "showgui capturequick" ]
                guicenter [ guibutton "capture-the-flag defend" "showgui capturedefend" ]
                guicenter [ guibutton "capture-the-flag protect" "showgui captureprotect" ]
                guicenter [ guibutton "defend-and-control king" "showgui defendking" ]
                guicenter [ guibutton "defend-and-control quick" "showgui defendquick" ]
                guicenter [ guibutton "bomber-ball hold" "showgui bomberhold" ]
                guicenter [ guibutton "bomber-ball basket" "showgui bomberbasket" ]
                guicenter [ guibutton "bomber-ball attack" "showgui bomberattack" ]
                guicenter [ guibutton "time-trial marathon" "showgui timetrialmarathon" ]
                guicenter [ guibutton "time-trial endurance" "showgui timetrialendurance" ]
                guicenter [ guibutton "time-trial gauntlet" "showgui timetrialgauntlet" ]
            ]
        ]
    ]
]

newgui multi [
    guiheader "Multi Mutator"
    guilist [
        guiimage "textures/modes/multi" [] 2
        guistrut 2
        guitext "Play with four teams instead of two." "" -1 -1 1200
    ]
    guistrut 3
]

newgui ffa [
    guiheader "Free-For-All Mutator"
    guilist [
        guiimage "textures/modes/ffa" [] 2
        guistrut 2
        guitext "There are no teams, just every player for themselves in a free-for-all showdown. (Not available in Capture-the-Flag or Defend-and-Control)" "" -1 -1 1200
    ]
    guistrut 3
]

newgui coop [
    guiheader "Co-op Mutator"
    guilist [
        guiimage "textures/modes/coop" [] 2
        guistrut 2
        guitext "All human players are forced onto the same team, battling against a team of bots... and there are more of them than there are of you!" "" -1 -1 1200
    ]
    guistrut 3
]

newgui instagib [
    guiheader "Instagib Mutator"
    guilist [
        guiimage "textures/modes/instagib" [] 2
        guistrut 2
        guitext "Players spawn with 1 HP, so any hit is lethal. Unless the medieval or kaboom mutators are also selected, players only spawn with the rifle. All rifle spawns become grenade spawns." "" -1 -1 1200
    ]
    guistrut 3
]

newgui medieval [
    guiheader "Medieval Mutator"
    guilist [
        guiimage "textures/modes/medieval" [] 2
        guistrut 2
        guitext "Players only spawn with swords. All sword spawns become grenade spawns." "" -1 -1 1200
    ]
    guistrut 3
]

newgui kaboom [
    guiheader "Kaboom Mutator"
    guilist [
        guiimage "textures/modes/kaboom" [] 2
        guistrut 2
        guitext "Players only spawn with grenades and mines. Grenades and mines reload in this mutator like a normal loadout weapon." "" -1 -1 1200
    ]
    guistrut 3
]

newgui duel [
    guiheader "Duel Mutator"
    guilist [
        guiimage "textures/modes/duel" [] 2
        guistrut 2
        guitext "Only two players spawn at a time, the rest are placed in a queue. The winner always continues to the next round in a free-for-all duel, while the loser always gets placed at the end of the queue." "" -1 -1 1200
    ]
    guistrut 3
]

newgui survivor [
    guiheader "Survivor Mutator"
    guilist [
        guiimage "textures/modes/survivor" [] 2
        guistrut 2
        guitext "All players spawn as normal, but there is no health regeneration. The last player or team standing wins the round. Players that die are placed in a queue to respawn in the next round." "" -1 -1 1200
    ]
    guistrut 3
]

newgui classic [
    guiheader "Classic Mutator"
    guilist [
        guiimage "textures/modes/classic" [] 2
        guistrut 2
        guitext "Everyone spawns with only a pistol. The rest of the weapons can be found at spawn points scattered acround the map." "" -1 -1 1200
    ]
    guistrut 3
]

newgui onslaught [
    guiheader "Onslaught Mutator"
    guilist [
        guiimage "textures/modes/onslaught" [] 2
        guistrut 2
        guitext "Enemy drones and sentry turrets spawn in the middle of the action. If one of them kills you, you lose points!" "" -1 -1 1200
    ]
    guistrut 3
]

newgui freestyle [
    guiheader "Freestyle Mutator"
    guilist [
        guiimage "textures/modes/freestyle" [] 2
        guistrut 2
        guitext "There are no impulse limits, the meter is never depleted so get your parkour on!" "" -1 -1 1200
    ]
    guistrut 3
]

newgui vampire [
    guiheader "Vampire Mutator"
    guilist [
        guiimage "textures/modes/vampire" [] 2
        guistrut 2
        guitext "Damage dealt to enemies causes you to regenerate the same amount of health. The default cap in this mutator is 300 health." "" -1 -1 1200
    ]
    guistrut 3
]

newgui resize [
    guiheader "Resize Mutator"
    guilist [
        guiimage "textures/modes/resize" [] 2
        guistrut 2
        guitext "As your health decreases, you become smaller and your speed decreases. The opposite is true when you gain health. When combined with the instagib mutator you become larger every time you kill an enemy, until you die and return to normal size." "" -1 -1 1200
    ]
    guistrut 3
]

newgui hard [
    guiheader "Hard Mutator"
    guilist [
        guiimage "textures/modes/hard" [] 2
        guistrut 2
        guitext "Players spawn without a radar. There is no health regeneration in this mutator." "" -1 -1 1200
    ]
    guistrut 3
]

newgui capturequick [
    guiheader "Capture-the-Flag Quick Mutator"
    guilist [
        guiimage "textures/modes/capturequick" [] 2
        guistrut 2
        guitext "Touching your own team's loose flag will instantly teleport it back to your base, instead of having to escort it there on foot." "" -1 -1 1200
    ]
    guistrut 3
]

newgui capturedefend [
    guiheader "Capture-the-Flag Defend Mutator"
    guilist [
        guiimage "textures/modes/capturedefend" [] 2
        guistrut 2
        guitext "When your flag is taken from your base, you cannot pick it up. You must protect it from where it's dropped until the timer resets." "" -1 -1 1200
    ]
    guistrut 3
]

newgui captureprotect [
    guiheader "Capture-the-Flag Protect Mutator"
    guilist [
        guiimage "textures/modes/captureprotect" [] 2
        guistrut 2
        guitext "Instead of scoring for returning an enemy flag to your base, you simply must pick it up and hold onto it for 15 seconds to score. You may also carry your own flag around while seeking out others." "" -1 -1 1200
    ]
    guistrut 3
]

newgui defendking [
    guiheader "Defend-and-Control King Mutator"
    guilist [
        guiimage "textures/modes/defendking" [] 2
        guistrut 2
        guitext "There is only one control point in this mutator. The objective: make your team king of the hill." "" -1 -1 1200
    ]
    guistrut 3
]

newgui defendquick [
    guiheader "Defend-and-Control Quick Mutator"
    guilist [
        guiimage "textures/modes/defendquick" [] 2
        guistrut 2
        guitext "Control points are secured much more quickly in this mutator. When capturing enemy control points there is no neutral state, the point is captured immediately for your team." "" -1 -1 1200
    ]
    guistrut 3
]

newgui bomberhold [
    guiheader "Bomber-Ball Hold Mutator"
    guilist [
        guiimage "textures/modes/bomberhold" [] 2
        guistrut 2
        guitext "Instead of bringing the ball to a goal, you earn points in this mutator by holding the ball as long as possible. Killing an enemy will reset the explode timer. The ball will still explode when the timer runs out however, resulting in drastic point loss, so throw it away or pass it to a teammate before this happens!" "" -1 -1 1200
    ]
    guistrut 3
]

newgui bomberbasket [
    guiheader "Bomber-Ball Basket Mutator"
    guilist [
        guiimage "textures/modes/bomberbasket" [] 2
        guistrut 2
        guitext "Instead of bringing the ball to the goal on foot, you absolutely must throw it in to score. You also must be far enough away from the goal when throwing." "" -1 -1 1200
    ]
    guistrut 3
]

newgui bomberattack [
    guiheader "Bomber-Ball Attack Mutator"
    guilist [
        guiimage "textures/modes/bomberattack" [] 2
        guistrut 2
        guitext "One team spawns with the ball at their goal while all others try to prevent the team from scoring at another goal. Afer a set time, the roles are switched." "" -1 -1 1200
    ]
    guistrut 3
]

newgui timetrialmarathon [
    guiheader "Time-Trial Marathon Mutator"
    guilist [
        guiimage "textures/modes/timetrialmarathon" [] 2
        guistrut 2
        guitext "Instead of competing for the fastest overall time, players and teams compete for the most number of laps." "" -1 -1 1200
    ]
    guistrut 3
]

newgui timetrialendurance [
    guiheader "Time-Trial Endurance Mutator"
    guilist [
        guiimage "textures/modes/timetrialendurance" [] 2
        guistrut 2
        guitext "Your impulse meter is not restored upon death or checkpoint respawn. Also slows down impulse regeneration, so plan your route carefully!" "" -1 -1 1200
    ]
    guistrut 3
]

newgui timetrialgauntlet [
    guiheader "Time-Trial Gauntlet Mutator"
    guilist [
        guiimage "textures/modes/timetrialgauntlet" [] 2
        guistrut 2
        guitext "One team races to reach the goal and score points, while the other teams try to attack them before they can reach the end. Afer a set time, the roles are switched." "" -1 -1 1200
    ]
    guistrut 3
]

newgui rules [
    guiheader "Rules"
    guistrut 0.5
    guifont "small" [
        guicenter [ guitext "As a general code of conduct when playing online on any official Red Eclipse server, our team asks that you:" ]
    ]
    guistrut 0.5
    guitext "- Respect the rules of individual servers at all times"
    guitext "- Respect other players to ensure a better experience for everyone"
    guitext "- Obey the requests of global moderators without argument"
    guistrut 1
    guifont "small" [
        guicenter [ guitext "The following are the full multiplayer guidelines for connecting to the Red Eclipse Master Server:" ]
    ]
    guistrut 0.5
    guicenter [
        guieditor doc/guidelines.txt -80 15
        textinit doc/guidelines.txt doc/guidelines.txt
        textmode 4
    ]
    guistrut 1
]

newgui auth [
    guiheader "Player Accounts"
    guifont "emphasis" [
        guicenter [ guibutton "how to obtain an account" "showgui obtain-account" ]
        guicenter [ guibutton "account levels" "showgui account-levels" ]
    ]
]

newgui obtain-account [
    guiheader "Obtain an Account"
    guicenter [ guitext "You may apply for an account by filling out the form at the following URL:" ]
    guicenter [ guitext "^fs^fchttp://redeclipse.net/apply^fS" ]
    guistrut 0.5
    guicenter [ guitext "Accounts are processed manually, please allow 1-2 weeks for processing."]
    guicenter [ guitext "Global Moderator applications are closed, you will need a referral"]
    guicenter [ guitext "from an existing team member at this time."]
]

newgui account-levels [
    guiheader "Account Levels"
    guicenter [ guitext "There are two types of auth accounts in Red Eclipse, ^fs^fyglobal auth^fS and ^fs^fclocal auth^fS. The former are assigned by the Red Eclipse team and are functional globally across all servers, the latter are assigned by server owners and local only to that server. Auth accounts are represented by small icons shown next to player names, each with different privileges and responsibilities." "" -1 -1 2100]
    guistrut 4
    guitext "The following signify ^fs^fyglobal^fS privileges across all servers:"
    guistrut 0.5
    guilist [
        guilist [
            looplist i [bot none player supporter moderator operator administrator developer founder] [
                guitext  $i (format "privs/%1" $i) 0xFFFF00
            ]
        ]
        guistrut 1
        guilist [
            guitext "This icon marks A.I. controlled players."
            guitext "These are default players with no account." 
            guitext "Registered players with regular accounts."
            guitext "Those players who contributed in some way."
            guitext "Can moderate games, e.g. mute or kick players."
            guitext "Advanced moderation, can change most variables."
            guitext "Admins have full control of server settings."
            guitext "These are the core developers of the project."
            guitext "The crown icon is for the founders of the project."
        ]
    ]
    guistrut 1
    guitext "Furthermore, some ^fs^fclocal^fS privileges can be granted on individual servers:"
    guistrut 0.5
    guilist [
        guilist [
            looplist i [supporter moderator operator administrator] [
                guitext  $i (format "privs/local%1" $i) 0x00FFFF
            ]
        ]
        guistrut 1
        guilist [
            guitext "Has no special permissions per default."
            guitext "Can moderate games on this server."
            guitext "Has advanced rights on this server."
            guitext "This is often used by server owners."
        ]
    ]
]